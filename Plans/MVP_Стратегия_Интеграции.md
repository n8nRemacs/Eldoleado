# MVP — Стратегия интеграций и быстрого запуска

> **Принцип:** Build vs Buy vs Integrate — не строй то, что уже существует и работает

---

## Что интегрируем (не строим с нуля)

### 1. Блок Канбан → AmoCRM / Bitrix24

**Почему:**
- Канбан с нуля = сложный UI (drag-and-drop, фильтры, адаптивность)
- Занимает 2-3 недели разработки
- AmoCRM/Bitrix24 уже имеют зрелые канбаны
- Клиенты часто уже используют одну из этих CRM

**Что делаем:**
- Интеграция через API
- Твоя система создаёт сделки/карточки
- Передаёт данные: клиент, устройство, проблема, статус
- Оператор работает в привычном интерфейсе

**Срок:** 3 дня на одну интеграцию

**Плюсы:**
✅ Быстро (3 дня вместо 14)
✅ Знакомый интерфейс для клиентов
✅ Не нужно строить UI

**Минусы:**
❌ Зависимость от внешней системы
❌ Клиент платит за CRM отдельно (1500-3000 руб/мес)

**Когда заменить на свой:**
- После 50 клиентов
- Когда клиенты попросят "всё в одном"
- Когда будет понятно, какой функционал критичен

---

### 2. Блок Триггеров → Захардкодить базовые

**Почему:**
- Для MVP нужно 5-7 типовых триггеров
- Визуальный редактор триггеров = 1-2 недели разработки
- Базовые триггеры можно захардкодить за 2-3 дня

**Базовые триггеры для MVP:**

1. **Новая заявка → уведомить оператора**
   - Событие: `appeal_created`
   - Действие: Push на Android app + Telegram

2. **Статус изменён → уведомить клиента**
   - Событие: `status_changed_to_done`
   - Действие: WhatsApp/Telegram клиенту

3. **Заявка без ответа 2 часа → напомнить оператору**
   - Событие: `created_at < NOW() - INTERVAL 2 HOUR AND status = 'new'`
   - Действие: Push + Telegram оператору

4. **Ремонт завершён 3 дня назад → запросить отзыв**
   - Событие: `completed_at < NOW() - INTERVAL 3 DAY`
   - Действие: WhatsApp с просьбой оставить отзыв

5. **Заявка висит >5 дней → эскалация**
   - Событие: `updated_at < NOW() - INTERVAL 5 DAY`
   - Действие: Уведомление руководителю

**Реализация:**
```javascript
// n8n workflow или прямо в коде
const triggers = {
  'appeal_created': {
    action: 'notify_operator',
    channels: ['push', 'telegram']
  },
  'status_done': {
    action: 'notify_client',
    template: 'repair_done'
  },
  'no_response_2h': {
    condition: 'created_at < NOW() - INTERVAL 2 HOUR',
    action: 'remind_operator'
  }
}
```

**Срок:** 2-3 дня

**Когда заменить на визуальный редактор:**
- После 30-50 клиентов
- Когда начнут просить кастомные триггеры

---

### 3. Блок Материалов → n8n workflows

**Суть:**
Автоматическая отправка документов/ссылок по триггерам в воронке.

**Примеры:**
- Заявка создана → Договор на ремонт (PDF)
- Ремонт завершён → Гарантийный талон (PDF)
- 3 дня после выдачи → Ссылка на отзыв (2ГИС)
- Клиент 3-й раз → Промокод на 10% (текст + картинка)

**Реализация через n8n:**

```
Webhook: appeal_created
  ↓
Supabase: Получить данные клиента
  ↓
HTTP Request: Скачать PDF из Storage
  ↓
WhatsApp API: Отправить файл клиенту
```

**Хранение материалов:**
- Supabase Storage или Google Drive
- Папки: `contracts/`, `certificates/`, `promo/`

**Срок:** 1 день на триггер

**Плюсы:**
✅ Очень быстро
✅ Гибко (легко добавлять новые)
✅ Не нужен UI (настраиваешь в n8n)

**Когда заменить на UI:**
- После 30 клиентов
- Когда клиенты попросят управлять материалами сами

---

### 4. Блок Аналитика → ПОСЛЕ запуска

**Почему откладываем:**
- Для аналитики нужна статистика (минимум 1-2 месяца)
- На старте клиентам важнее "чтобы работало"
- Можно временно выгружать в Google Sheets

**Базовая аналитика (временно):**
- SQL запрос → JSON
- Простой дашборд (1 страница с цифрами)
- Или Google Sheets для первых клиентов

**Метрики для MVP:**
1. Количество заявок (всего, за день, за неделю)
2. Распределение по статусам
3. Среднее время обработки
4. Конверсия (принято → завершено)

**Когда делать полноценный блок:**
- После 20-30 клиентов
- Когда накопится статистика
- Когда клиенты начнут спрашивать про отчёты

---

## Что строим сами (Must Have для MVP)

### 1. AI извлечение данных
**Уже есть:** Universal AI Worker система
**Доработать:** Промпты под разные типы заявок

**Срок:** 3-5 дней

---

### 2. Интеграция каналов
- WhatsApp Business API
- Telegram Bot API
- VK API (опционально)

**Срок:** 5-7 дней

---

### 3. Android app
**Доработать:**
- UI для оператора
- Push-уведомления
- Список заявок

**Срок:** 7-10 дней

---

### 4. База данных
**Структура:**
- `appeals` (заявки)
- `clients` (клиенты)
- `devices` (устройства)
- `messages_history` (история сообщений)
- `materials` (документы для отправки)
- `trigger_materials` (связь триггеров и материалов)

**Срок:** 2-3 дня (уже частично есть)

---

## Timeline MVP (4-5 месяцев)

### Месяц 1: Ядро системы

**Что делаем:**
- [ ] AI извлечение (доработка промптов) — 3 дня
- [ ] Интеграция каналов (WhatsApp, Telegram) — 5 дней
- [ ] База данных (структура + миграции) — 3 дня
- [ ] API для внешних интеграций — 5 дней

**Результат:** Backend готов к интеграциям

---

### Месяц 2: Интеграции + Android

**Что делаем:**
- [ ] Интеграция с AmoCRM (API) — 3 дня
- [ ] Интеграция с Bitrix24 (API) — 3 дня
- [ ] Android app: доработка UI — 7 дней
- [ ] Базовые триггеры (захардкодить) — 3 дня
- [ ] Push-уведомления — 2 дня
- [ ] Блок Материалов (n8n workflows) — 4 дня

**Результат:** Рабочий продукт (80% функционала)

---

### Месяц 3: Онбординг + Документация

**Что делаем:**
- [ ] Пошаговая настройка для клиентов — 5 дней
- [ ] Видео-гайды (как подключить WhatsApp, AmoCRM) — 3 дня
- [ ] FAQ — 2 дня
- [ ] Шаблоны ответов клиентам — 2 дня
- [ ] Простая аналитика (1 страница) — 3 дня

**Результат:** Продукт готов к продажам

---

### Месяцы 4-5: Первые клиенты + Вертикаль "Автоклиент"

**Что делаем:**
- [ ] Запуск продаж (10 клиентов на тест) — ongoing
- [ ] Параллельно: создание вертикали "Автоклиент"
  - [ ] Email-серии (шаблоны) — 3 дня
  - [ ] Telegram-бот для лидов — 5 дней
  - [ ] Лендинг — 3 дня
  - [ ] Интеграция с "Ремонтом" — 2 дня

**Результат:**
- 10 клиентов BatteryCRM на тесте
- Вертикаль "Автоклиент" готова

---

## Интеграции: приоритеты

### Must Have (для MVP):

| Система | Зачем | Сложность | Срок |
|---------|-------|-----------|------|
| **AmoCRM** | Канбан + воронка | Средняя | 3 дня |
| **Bitrix24** | Альтернатива AmoCRM | Средняя | 3 дня |
| **WhatsApp Business API** | Общение с клиентами | Высокая | 5 дней |
| **Telegram Bot API** | Уведомления + лиды | Низкая | 2 дня |

**Итого:** 13 дней чистой работы

---

### Nice to Have (после MVP):

| Система | Зачем | Когда |
|---------|-------|-------|
| **VK API** | Лиды из VK | После 20 клиентов |
| **Avito API** | Лиды с Авито | После 30 клиентов |
| **2ГИС API** | Отзывы | После 50 клиентов |
| **Свой Канбан** | Независимость от CRM | После 50 клиентов |
| **Визуальный редактор триггеров** | Кастомизация | После 50 клиентов |

---

## Стратегия перехода: от интеграций к своему

### Этап 1: MVP с интеграциями (месяцы 1-6)
- AmoCRM/Bitrix24 для канбана
- Захардкоженные триггеры
- Простая аналитика

**Клиентов:** 0 → 20

---

### Этап 2: Гибридная модель (месяцы 7-12)
- Предлагаем выбор: внешняя CRM или своя
- Свой Канбан для новых клиентов
- Визуальный редактор триггеров
- Продвинутая аналитика

**Клиентов:** 20 → 50

---

### Этап 3: Полная независимость (месяцы 13+)
- Всё встроено (канбан, триггеры, аналитика)
- Интеграции остаются опциональными
- Платформа готова к масштабированию

**Клиентов:** 50 → 200+

---

## Pricing с интеграциями

### Тариф "Старт" (2000 руб/мес)
**Что включено:**
- AI приём заявок
- Интеграция с AmoCRM **или** Bitrix24 (на выбор)
- WhatsApp + Telegram
- 5 базовых триггеров (захардкоженных)
- Блок Материалов (отправка документов)
- Базовая аналитика (1 страница)

**Примечание:** Клиент сам оплачивает AmoCRM/Bitrix (1500-3000 руб/мес)

---

### Тариф "Рост" (5000 руб/мес)
**Что включено:**
- Всё из "Старт"
- Интеграция с VK, Avito
- Push-уведомления
- 10 триггеров
- Расширенная аналитика

---

### Тариф "Премиум" (10000 руб/мес)
**Что включено:**
- Всё из "Рост"
- **Свой встроенный Канбан** (когда будет готов)
- Кастомные триггеры
- White label
- API доступ

**Примечание:** Не нужна внешняя CRM

---

## Ключевые решения MVP

| Блок | Решение | Почему | Срок |
|------|---------|--------|------|
| **Канбан** | Интеграция (AmoCRM/Bitrix24) | Сложный UI, 3 дня vs 14 | 3 дня |
| **Триггеры** | Захардкодить 5-7 базовых | Достаточно для старта | 3 дня |
| **Материалы** | n8n workflows | Быстро, гибко | 1 день/триггер |
| **Аналитика** | Простой дашборд | Нужна статистика | После 20 клиентов |

**Экономия времени:** ~3 недели разработки

---

*Принцип MVP: минимум кода, максимум ценности.*
